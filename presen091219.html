<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8"/>
    <!-- metadata -->
    <meta name="generator" content="S5" />
    <meta name="version" content="S5 1.1" />
    <meta name="presdate" content="20091219" />
    <meta name="author" content="源馬 照明" />
    <meta name="company" content="名古屋大学大学院多元数理科学研究科" />
    <!-- configuration parameters -->
    <meta name="defaultView" content="slideshow" />
    <meta name="controlVis" content="hidden" />
    <title>アプリケーションプラットフォームとしてのFirefox拡張</title>
    <!-- style sheet links -->
    <link rel="stylesheet" href="pixel/slides.css" type="text/css" media="projection" id="slideProj" />
    <link rel="stylesheet" href="ui/default/outline.css" type="text/css" media="screen" id="outlineStyle" />
    <link rel="stylesheet" href="ui/default/print.css" type="text/css" media="print" id="slidePrint" />
    <link rel="stylesheet" href="ui/default/opera.css" type="text/css" media="projection" id="operaFix" />
    <!-- embedded styles -->
    <style type="text/css" media="all">
    </style>
    <!-- S5 JS -->
    <script src="ui/default/slides.js" type="text/javascript"></script>
    <script src="musubi.js" type="text/javascript"></script>
    <script src="prototype.js" type="text/javascript"></script>
    <script src="nico.js" type="text/javascript"></script>
  </head>
<body>
<div class="layout">
  <div id="controls"><!-- DO NOT EDIT --></div>
  <div id="currentSlide"><!-- DO NOT EDIT --></div>
  <div id="header"></div>
  <div id="footer">
    <h1>アプリケーションプラットフォームとしてのFirefox拡張</h1>
    <h2>源馬照明 &#8226; 2009年12月19日</h2>
  </div>
</div>
<div class="presentation">

<div class="slide">
  <h1>アプリケーションプラットフォーム<br />としてのFirefox拡張</h1>
  <h3>
    <a href="http://twitter.com/Gemmat">@Gemmat</a>
    teruakigemma@gmail.com
  </h3>
</div>

<div class="slide">
  <h1>はじめに</h1>
  <ul>
    <li>Firefox3 Hacksで、1年間勉強しました。
      <ul><li>すばらしい本をありがとう!</li></ul>
    </li>
    <li>dynamis様から貴重な機会をいただき、光栄です。<br/>
      <ul>
        <li>Firefox3 Hacksの共著者</li>
        <li>Mozilla Japan テクニカルマーケティング担当</li>
      </ul>
    </li>
    <li>あとでサインをください &gt;&lt;</li>
  </ul>
</div>

<div class="slide">
  <h1>J( 'ｰ`)し「パソコンで新聞読みなさい」</h1>
  <ul>
    <li>パソコンといえばブラウザ
    <li>新聞はウェブ
    <li>No Browser, No Life.
  </ul>
</div>

<div class="slide">
  <h1>J( 'ｰ`)し「ヤフーでメール送ったわよ」</h1>
  <ul>
    <li>母はYahoo!メール</li>
    <li>私はGMail</li>
    <li>デスクトップからブラウザへ</li>
  </ul>
</div>

<div class="slide">
  <h1>ブラウザを支配∽世界を支配</h1>
  <p><a href="deathnote.jpg"><img src="deathnote.jpg" height="350"/></a></p>
</div>

<div class="slide">
  <h1>ブラウザは書き直せる</h1>
  <p><a href="matrix.jpg"><img src="matrix.jpg" height="350"/></a></p>
</div>

<div class="slide">
  <h1>大学院の研究でFirefox拡張を使ってみた</h1>
  <ul>
    <li>Windows, Mac, Linux で動いて感動
    <li>使いやすいGUIを簡単に実現できた。
      <ul><li>使いやすいFirefoxの上で動くから。</li></ul>
    </li>
    <li>データベース内蔵!
    <li>設定システム内蔵!
    <li>Write once, run anywhere!
    <li>最高のアプリケーションプラットフォーム!
  </ul>
</div>

<div class="slide">
  <h1>なぜFirefox?(1/2)</h1>
  <a href="mozilla.gif"><img class="right" src="mozilla.gif" height="350"/></a>
  <p><q>巨人の肩の上に立つ</q></p>
  <ul>
    <li>世界中のハッカーが毎夜改善</li>
    <li>世界中のユーザーが毎日利用</li>
  </ul>
  <p>頑丈な巨人。プログラマが最後に称賛するのは、頑丈さなのです!</p>
</div>

<div class="slide">
  <h1>なぜFirefox?(2/2)</h1>
  <a href="usetheforce.jpg"><img class="right" src="usetheforce.jpg" height="350"/></a>
  <p>
  <blockquote>
  よいプログラマーは、何を書くべきかわかっている。<br/>
  偉大なプログラマは、何を書き直すべきか<br/>(そして再利用すべきか)わかっている。
  </blockquote>
  </p>
  <q>ソースを使え、ルーク!</q>
</div>

<div class="slide">
  <h1>プラットフォームの比較</h1>
  <p>中学で、Windows95のVB5.0</p>
  <ul>
    <li>おもちゃ言語
    <li>GUIを簡単に作れた。
    <li>Windows限定
  </ul>
  <p>大学で、C言語、Schemeを勉強して、GTKやSDLを触ってみた</p>
  <ul>
    <li>本物の言語</li>
    <li>GUIがダメ。</li>
    <li>Linux限定(事実上)</li>
  </ul>
</div>

<div class="slide">
  <h1>GUIにありがちな問題</h1>
  <ul>
    <li>スクロールすると画面が乱れる
    <li>日本語入力を使うとチラつく
    <li>窓のサイズを変えるとレイアウトがぐちゃぐちゃに
    <li>独自の部品を作れない
    <li>国際化が難しい
    <li>Macユーザが、OK・適用・キャンセルボタンを嫌がる
  </ul>
  <p>Firefox拡張で全部解決。最強のGUIと言語のコンボをついに手に入れた。</p>
</div>

<div class="slide">
  <h1>最強のGUI(XUL)</h1>
  <p>
    <a href="xul.wmv">XULの自動レイアウト(動画)</a>
  </p>
</div>

<div class="slide">
  <h1>最強のGUI(XUL)</h1>
  <p>国際化
    <a href="locale.png"><img src="locale.png" height="250"/></a><br/>
    <a href="strings.png"><img src="strings.png" height="180"/></a>
    <a href="stringsja.png"><img src="stringsja.png" height="180"/></a>
  </p>
</div>

<div class="slide">
  <h1>最強のGUI(CSS)</h1>
  <p>
    <a href="pref_win.png"><img src="pref_win.png" height="250"/></a>
    <a href="pref_linux.png"><img src="pref_linux.png" height="250"/></a>
    <a href="userexp0.png"><img src="userexp0.png" height="250"/></a>
    <a href="userexp1.png"><img src="userexp1.png" height="250"/></a>
  </p>
</div>

<div class="slide">
  <h1>最強の言語(Javascript)</h1>
  <ul>
    <li>なじみやすい文法(C言語風構文)</li>
    <li>オブジェクト指向(Self風設計)</li>
    <li>関数型言語(Scheme風設計)</li>
  </ul>
  <p>Javascriptはプログラマの共通語。</p>
</div>

<div class="slide">
  <h1>Mozillaプラットフォーム概要</h1>
  <p><a href="platform.png"><img src="platform.png" height="400"/></a></p>
  dynamis様の資料から拝借。
</div>

<div class="slide">
  <h1>Firefox拡張</h1>
  <ul>
    <li>ローカルファイル読み書き、ソケット通信などが可能
      <ul><li>FTPクライアント、HTTPサーバ、インスタントメッセンジャだって作れる</li></ul>
    </li>
    <li>データベース内蔵
    <li>設定システム内蔵
    <li>インストール簡単
    <li>アップデート簡単
    <li>設定ウィンドウ簡単(xul:prefwindow要素)
    <li>ウィザード簡単(xul:wizard要素)
  </ul>
</div>

<div class="slide">
  <h1>アプリケーションプラットフォーム(1/2)</h1>
  <ul>
    <li>2chブラウザ
      <ul>
        <li>ブラウザの表現力を活かす</li>
        <li><q>履歴</q>,<q>ブックマーク</q>などがそのまま使える</li>
      </ul>
    </li>
    <li>はてブ拡張
      <ul>
        <li>ウェブとの連動</li>
        <li>内蔵データベースで高速な検索</li>
      </ul>
    </li>
    <li>FTPクライアント、メディアプレーヤー、etc.
      <ul>
        <li>クロスプラットフォームなGUI</li>
        <li>充実した通信機能</li>
        <li>スキン対応</li>
      </ul>
    </li>
  </ul>
</div>

<div class="slide">
  <h1>アプリケーションプラットフォーム(2/2)</h1>
  <ul>
    <li>Twitterボット、サンシャイン牧場ボット
      <ul>
        <li>タイマーで遅延をかけつつリクエスト連発</li>
        <li>レスポンスのXMLやJSONをパース</li>
      </ul>
    </li>
    <li>クローラ、スクレイピング
      <ul>
        <li>スイーツ(笑)なHTMLでも大丈夫</li>
        <li>DOM、XPathが強力</li>
      </ul>
    </li>
    <li>ファイル生成
      <ul><li>クロスプラットフォームなファイル読み書きが強力</li></ul>
    </li>
  </ul>
</div>

<div class="slide">
  <h1>ウェブを改革する方法</h1>
  <ul>
    <li>URIを改革する方法、独自プロトコルの定義
    <li>HTMLを改革する方法(?)、Chromeと非特権ドキュメントでデータを交換する
    <li>HTTPを改革する方法、拡張ならソケット通信をいじれる。
  </ul>
</div>

<div class="slide">
  <h1>独自プロトコルの定義</h1>
  <p>こういうGUIを見たら<a href="http://piro.sakura.ne.jp/latest/blosxom/mozilla/xul/2007-03-26_protocol.htm">Firefoxで独自プロトコルを定義する方法 - outsider reflex</a>の出番
    <a href="uri_2ch.png"><img src="uri_2ch.png" height="200"/></a>
    <a href="uri_gtalk.png"><img src="uri_gtalk.png" height="300"/></a>
  </p>
</div>

<div class="slide">
  <h1>Chromeと非特権ドキュメントでデータを交換する</h1>
  <p><a href="interchange.png"><img src="interchange.png" height="300"/></a></p>
  <ul>
    <li>DOMNodeInsertedイベントを待つ</li>
    <li>セキュリティの壁ごしに、ドキュメントの様子をうかがう。安全。</li>
  </ul>
  <a href="https://developer.mozilla.org/ja/Code_snippets/Interaction_between_privileged_and_non-privileged_pages">Interaction between privileged and non-privileged pages</a>
</div>

<div class="slide">
  <h1>マッチFOXの紹介</h1>
  <ul>
    <li>Firefox拡張を始めたいあなたに。拡張の骨組みを生成。</li>
    <li>ORMライブラリなど同梱</li>
    <li>E4Xをテンプレートエンジンにしてご希望の骨組みを生成し、ファイルに書き込む<br/>
    <code>
      &lt;file&gt;<br/>
  function hoge(){"{"} <br/>
    alert("Hello, {Template.yourname}");<br/>
  {"}"}<br/>
      &lt;/file&gt;
    </code>
    </li>
    <li><a href="https://addons.mozilla.org/ja/firefox/addon/47147/">マッチFOX</a></li>
  </ul>
</div>

<div class="slide">
  <h1>むすびの紹介</h1>
  <p>
    <div>
      <a href="uri_gtalk.png"><img src="uri_gtalk.png" height="300"/></a>
      <a href="archi.png"><img src="archi.png" height="300"/></a>
    </div>
  </p>
  <ul>
    <li><a href="https://addons.mozilla.org/ja/firefox/addon/50716">ブラウザと融合するインスタントメッセンジャー</a></li>
    <li>独自プロトコルの定義</li>
    <li>Chromeと非特権ドキュメントでデータを交換する</li>
  </ul>
</div>

</body>
</html>

